<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>欢迎</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/common_tree.css">
    <link rel="stylesheet" type="text/css" href="css/article.css">
    <script type="text/javascript" src = "js/jquery.min.js"></script>
    <script type="text/javascript" src = "js/bootstrap.min.js"></script>
    <script type="text/javascript" src = "js/vue.js"></script>
    <style type="text/css">
        .body1{
          background: #444444;
          color:#DDDDDD;
        }
        .arti a{
            color:#FFCC00;
            text-decoration: none!important;
            transition: all .25s;
           -moz-transition: all .25s;
           -webkit-transition: all .25s;
        }
         .arti a:hover{
            color: #f90;
         }
        /*VUE封装过渡动画效果*/
        .slide-fade-enter-active,.slide-fade-leave-active {
          transition: all .3s ease;
        }
        .slide-fade-enter,.slide-fade-leave-active{
          padding-left: 5px;
          opacity: 0;
        }
    </style>  
</head>

<body class="wrap" cz-shortcut-listen="true">
    <section class="docs pull-left">
            <div class ="unit content">
                <div class = "grid" id = "switch-content">  
                    <div class="unit thirty" id = "aside">
                        <div class = "line"></div>
                        <aside>
                            <h4>知识库目录</h4>
                            <ul onselectstart="return false">
                            <!-- :modal动态绑定treeDate的值到子组件中 v-on监听此子组件触发的事件-->
                              <item class="item" :model="model" v-for = "model in catalogue">
                              </item>
                            </ul>
                        </aside>
                    </div>
                    <div class="unit seventy" id = "article">
                        <article>
                            <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">{{title1}}</h3>
                                </div>
                                <!-- 文章页 -->
                                <transition name="slide-fade">
                                    <div class="panel-body body1" onselectstart="return false" v-if = "switch_article">
                                    <div class = "arti">
                                    <h1>欢迎</h1>
                                    <p>该站点的目标是成为 Jekyll 的全面指南。包括一些内容如：搭建和运行你的站点、创建以及管理内容、定制站点的展现和外观、在不同的环境中发布、以及参与到 Jekyll 将来的开发的一些建议。</p>
                                    <h2 id="jekyll_">Jekyll 究竟是什么？</h2>
                                    <p>Jekyll 是一个简单的博客形态的静态站点生产机器。它有一个模版目录，其中包含原始文本格式的文档，通过 <a href="#">Markdown</a> （或者 <a href="#">Textile</a>） 以及 <a href="#">Liquid</a> 转化成一个完整的可发布的静态网站，你可以发布在任何你喜爱的服务器上。Jekyll 也可以运行在 <a href="#">GitHub Page</a> 上，也就是说，你可以使用 GitHub 的服务来搭建你的项目页面、博客或者网站，而且是<strong>完全免费</strong>的。</p>
                                    <h2 id="">提示™、说明以及警告</h2>
                                    <p>这个指南随处都包含一些有用的小知识点，它们使 Jekyll 在使用过程中更便利、有趣，而且不会出错。以下是这些标识：</p>
                                    <div class="note">
                                        <h5>提示™帮助你更好的使用 Jekyll</h5>
                                        <p>这儿有各种小技巧让你成为 Jekyll 的魔法师</p>
                                    </div>
                                    <div class="note info">
                                        <h5>说明包含一些有用的信息</h5>
                                        <p>这儿提供一些帮助理解 Jekyll 的其他内容</p>
                                    </div>
                                    <div class="note warning">
                                        <h5>警告帮助你不出错</h5>
                                        <p>如果不想出错，请注意这类消息</p>
                                    </div>
                                    <p>如果你解决过一些问题不在我们的文档上，或者你发现一个别人可能也会用得到的技巧，请<a href="#">提出 issue</a>，我们将会考虑添加在这个指南中。</p>
                                    </div>
                                    <div class="section-nav">
                                        <div class="left align-right">
                                            <span class="prev disabled">后退</span>
                                        </div>
                                        <div class="right align-left">
                                            <a href="#" class="next">前进</a>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                    </div>
                                </transition>
                            </div>
                        </article>
                    </div>
                </div>
            <div class="clear"></div>
        </div>
    </section>
    <!-- 树形菜单模板 -->
    <script type="text/x-template" id="item-template">
      <li>
        <div
          :class="{bold: isFolder}"
          @click="toggleSwitchContent(model.id,model.name)">
          <i v-if="isFolder" v-bind:class="open ? 'fa fa-folder-open' : 'fa fa-folder'"></i>
          {{model.name}}
        </div>
        <ul v-show="open" v-if="isFolder">
          <item
            class="item"
            v-for="model in model.children"
            :model="model">
          </item>
        </ul>
      </li>
    </script>
   <script>
        // event bus用于子父组件传递数据
            var bus = new Vue();
            // 内容块
            var switchContent = new Vue({
                el:"#switch-content",
                data:{
                    article:[],
                    catalogue:[],
                    switch_article:true,//数据更新的动画（未做）
                    title1:'示例文章'
                },
                methods:{
       
                },
                created:function(){
                    var $this = this;
                    // 获取文档目录
                    $.ajax({
                        type:"GET",
                        url:"js/catalogue_doc.json",
                        dataType:"json",
                        success:function(data){
                          $this.catalogue = data;
                        }
                    });
                    //任意展示一个数据
                    $.ajax({
                        type:"GET",
                        url:"js/article.json",
                        dataType:"json",
                        success:function(data){
                            $this.article = data;
                        }
                    });
                    bus.$on('switchArticle', function (data) {
                        // 接收子组件数据并渲染到页面
                        $this.article = data;
                    });
                    bus.$on('switchTitle', function (data) {
                        // 面包屑导航数据
                        $this.switch_article = true;
                        $this.title1 = data;
                    });
                }
            });
            /*************树形菜单组件*****************/
            Vue.component('item', {
              template: '#item-template',
              props: {
                // 接收父组件传递过来的值
                model:''
              },
              data: function () {
                return {
                  open:false,
                  isFolder:true
                }
              },
              computed: {
                isFolder: function () {
                  return this.model.children &&
                    this.model.children.length;
                },
              },
              methods: {
                toggleSwitchContent: function (id,name) {
                    var $this = this;
                  if (this.isFolder) {
                    this.open = !this.open
                  }else{
                    //写一个异步取数据,用eventbus传事件
                    $.ajax({
                        type:"GET",
                        url:"js/article.json",//根据id或者url属性控制（方法一）
                        dataType:"json",
                        success:function(data){
                            //如果data的某一个itemid和当前函数传入id一样再触发事件传出当前item（方法二）
                            bus.$emit('switchArticle',data);
                        }
                    });
                    bus.$emit('switchTitle',name);
                  }
                }
              }
            })
    </script>
</body>
</html>
